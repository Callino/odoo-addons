<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-extend="Orderline">
        <t t-jquery=".info-list:first-of-type" t-operation="append">
            <t t-if="line.get_product().product_ref">
                <li class="ref">
                    <em>Reference: </em>
                    <t t-if="line.get_product().product_ref_textarea">
                        <textarea class="pro_ref" type="text" name="pro_ref"><t t-raw="line.get_product_reference() or ''"/></textarea>
                    </t>
                    <t t-else="">
                        <input class="pro_ref" type="text" name="pro_ref" t-att-value="line.get_product_reference()"/>
                    </t>
                </li>
            </t>
            <t t-if="!line.get_product().product_ref &amp;&amp; line.get_product_reference()">
                <li class="ref">
                    <em>Reference: </em><t t-raw="line.get_product_reference()"/>
                </li>
            </t>
        </t>
    </t>

    <!-- OrderReceipt (PosTicket and XmlReceipt seem to be merged into this) -->
    <t t-extend="OrderReceipt">
        <t t-jquery="t[t-foreach*='receipt.orderlines']" t-operation="append">
            <t t-if="line.product_ref_text">
                <line>
                    <left>
                        Ref.: <t t-esc="line.product_ref_text"/>
                    </left>
                </line>
            </t>
        </t>
    </t>
</templates>